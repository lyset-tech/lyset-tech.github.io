---
layout:     post
title:      "你所不知道的Java"
subtitle:   "一些Java编程的常识"
date:       2017-11-29
author:     "雷塞特"
header-img: "img/header-banner/coffee-bean_1920x1280.jpg"
catalog: true
tags:
    - java
---

### 实参形参
前些天看到朋友圈分享了一片文章[《Java函数的传参机制——你真的了解吗？》](http://blog.csdn.net/whuxinxie/article/details/54895768)

**题目：01**

请用Java完成swap函数，交换两个整数类型的值。
```java
public static void main(String[] args){
    Integer a = 1, b=2;
    swap(a,b);
    System.out.print("a="+ a + ", b="+ b);
}
static void swap(Integer a, Integer b){
   // 需要实现的部分
}
```

如果你不了解Java对象在内存中的分配方式，以及方法传递参数的形式，你有可能会写出以下代码。
```java

static void swap(Integer a, Integer b){
   Integer tmp = a;
   a = b;
   b =tmp;
}
```
运行的结果显示a和b两个值并没有交换。
那么让我们来看一下上述程序运行时，Java对象在内存中的分配方式:
![对象地址分配](/img/2017.11.29/01.Object_allocation.png)

由此可以看到，在两个方法的局部变量表中分别持有的是对a、b两个对象实际数据地址的引用。
上面实现的swap函数，仅仅交换了swap函数里局部变量a和局部变量b的引用，并没有交换JVM堆中的实际数据。
所以main函数中的a、b引用的数据没有发生交换，所以main函数中局部变量的a、b并不会发生变化。

那么要交换main函数中的数据要如何操作呢？
根据上面的实践，可以考虑交换a和b在JVM堆上的数据值？
简单了解一下Integer这个对象，它里面只有一个int类型的value用以表示该对象的值。
所以我们使用反射来修改该值：



在以上程序运行后，如果在创建一个Integer a = 1;然后输出a，请问a是多少呢？





上面的部分作者深思熟虑后，觉得无解。




