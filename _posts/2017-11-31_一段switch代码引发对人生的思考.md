---
layout:     post
title:      "2017-11-29_01_你所不知道的Java之Switch"
subtitle:   "一些Java编程的常识"
date:       2017-11-29
author:     "雷塞特"
header-img: "img/header-banner/coffee-bean_1920x1280.jpg"
catalog: true
tags:
    - java
---

# switch long
  作为一个java新手在学习java的过程中，机缘巧合的我写了一段这样的代码
  
    Long l = 0L;
    
    switch (l){
        。。。。

  于是我得到了这个的错误：
  
      T.java:5: error: incompatible types: Long cannot be converted to int
             switch (l){  
             
  什么鬼，啥情况，赶紧百度百度
  
  官方是这样说的
    
     switch works with the byte, short, char, and int primitive data types.
     It also works with enumerated types (discussed in Enum Types), the String class, 
     and a few special classes that wrap certain primitive types: 
     Character, Byte, Short, and Integer .
     
？？？only

？？byte？short？char？int？

？？？Enum？String？Character？Byte？Short？Integer？
     
嗯？为什么没有long？接着百度

从官网上找到[Compile Switch](https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-3.html#jvms-3.10)这一节 

偏好中文读者点击这里[Java虚拟机规范（Java SE 7）](http://vdisk.weibo.com/s/zvvfOIan7YyZw)

官网里面的描述是这样的：
    
    Compilation of switch statements uses the tableswitch and lookupswitch instructions. 
    The tableswitch instruction is used when the cases of the switch can be efficiently represented as indices into a table of target offsets. 
    The default target of the switch is used if the value of the expression of the switch falls outside the range of valid indices. For instance:

    编译switch 使用两种指令 tableswitch 和 lookupswitch
    当switch内的case值能被表示为一个表中的索引值时，则使用tableswitch。

接着看

    The Java Virtual Machine's tableswitch and lookupswitch instructions operate only on int data. Because operations on byte, char, or short values are internally promoted to int, a switch whose expression evaluates to one of those types is compiled as though it evaluated to type int. 

好像说到我们的疑问了，

    tableswitch 和lookupswitch只操作在int数据上，对于byte char short的操作在内部都会提升为int

原来JVM底层提供两种只支持2*32大小的偏移量（也就是int的大小）的switch指令 tableswitch  和 lookupswitch 。
所以在java中其实也只实现了byte, short, char, and int的switch，至于他们的包装类型以及Enum，String都是编译器给我们的语法糖,甚至于byte，short，char也会在运行时提升为int。
   
## 居然都是语法糖！

 看来编译器为我们做了不少啊，先看看原始类型的包装类是如何实现switch的。
### Integer类型:

``` java
private void integerSwitch()
   Integer integerS = 0;
   switch (integerS){
      case 1:
      case 0:
      case 2:
        System.out.println(integerS);
   }
}
A μ
```
使用[jad](http://www.javadecompilers.com/) 反编译后：

``` java
private void integerSwitch()
{
    Integer integer = Integer.valueOf(0);
    switch(integer.intValue())
    {
    case 0: // '\0'
    case 1: // '\001'
    case 2: // '\002'
        System.out.println(integer);
        break;
    }
}
```
嗯，果然真的，使用intValue()，

等下，怎么顺序感觉怪怪的，说好的102，居然给我排了队，

还是用JDK自带的javap，看一眼bytecode吧

bytecode：
``` java
    0: iconst_0
    1: invokestatic  #2                  // Method java/lang/Integer.valueOf:(I)Ljava/lang/Integer;
    4: astore_1
    5: aload_1
    6: invokevirtual #3                  // Method java/lang/Integer.intValue:()I
    9: tableswitch   { // 0 to 2
                   0: 36
                   1: 36
                   2: 36
             default: 43
        }
    36: getstatic     #4                  // Field java/lang/System.out:Ljava/io/PrintStream;
    39: aload_1
    40: invokevirtual #5                  // Method java/io/PrintStream.println:(Ljava/lang/Object;)V
    43: return
```
嗯，jad还是可信的。

明白了，前面提到了对于连续case值会使用tableswitch，编译器为我们调整了顺序（真聪明）。

###  String 类型
源码：
``` java
    private void test1(){
	String feiniao = "feiniao";
        switch(feiniao){
            case "FB":
                System.out.println("FB");
                break;
            case "Ea":
                System.out.println("Ea");
                break;
        }
    }
```
使用[jad](http://www.javadecompilers.com/) 反编译后：
``` java
private void test1()
    {
        String s = "feiniao";
        String s1 = s;
        byte byte0 = -1;
        switch(s1.hashCode())
        {
        case 2236:
            if(s1.equals("Ea"))
                byte0 = 1;
            else
            if(s1.equals("FB"))
                byte0 = 0;
            break;
        }
        switch(byte0)
        {
        case 0: // '\0'
            System.out.println("FB");
            break;

        case 1: // '\001'
            System.out.println("Ea");
            break;
        }
    }
```
这糖可真甜那！

- 先来看看这个使用了新的变量s1，防止并发操作，所造成的结果不可知。
- 然后使用了一个byte的变量和两次的switch，防止了[hash碰撞](https://zacard.net/2016/08/29/hash-collision/)
### 最后是 Enum 的switch 
源码：
```java
enum Em {
    A,B,C,D,E;
}
private void test2(){
       Em em = Em.A;
       switch (em){
            case A:
                 System.out.println("A");
                 break;
            case C:
                 System.out.println("C");
                 break;
            case E:
    		     System.out.println("E");
                 break;
          default:
        
       }
    }
```   
使用[jad](http://www.javadecompilers.com/) 反编译后：
```java
private void test2()
    {
        Em em = Em.A;
        static class _cls1
        {

            static final int $SwitchMap$Em[];

            static
            {
                $SwitchMap$Em = new int[Em.values().length];
                try
                {
                    $SwitchMap$Em[Em.A.ordinal()] = 1;
                }
                catch(NoSuchFieldError nosuchfielderror) { }
                try
                {
                    $SwitchMap$Em[Em.C.ordinal()] = 2;
                }
                catch(NoSuchFieldError nosuchfielderror1) { }
                try
                {
                    $SwitchMap$Em[Em.E.ordinal()] = 3;
                }
                catch(NoSuchFieldError nosuchfielderror2) { }
            }
        }

        switch(_cls1.SwitchMap.Em[em.ordinal()])
        {
        case 1: // '\001'
            System.out.println("A");
            break;

        case 2: // '\002'
            System.out.println("C");
            break;

        case 3: // '\003'
            System.out.println("E");
            break;
        }
    }
```   

信息量有点大

- 首先方法内多了一个类，

- 然后目录里多了一个名 T$1的类，

- switch的东西也不是原先的我们定义的Em，

让我缓缓，，，先用javap看一下bytecode

```java
         0: getstatic     #9                  // Field Em.A:LEm;
         3: astore_1
         4: getstatic     #10                 // Field T$1.$SwitchMap$Em:[I
         7: aload_1
         8: invokevirtual #11                 // Method Em.ordinal:()I
        11: iaload
        12: tableswitch   { // 1 to 3
                       1: 40
                       2: 51
                       3: 62
                 default: 73
            }
     。。。
     。。。
        70: goto          73
        73: return
```   
_cls1类不见了，不过可以看到一个静态常量T$1.$SwitchMap$Em，让我们看一下目录里的T$1.class长啥样
```java
static class T$1
{

    static final int $SwitchMap$Em[];

    static
    {
        $SwitchMap$Em = new int[Em.values().length];
        try
        {
            $SwitchMap$Em[Em.A.ordinal()] = 1;
        }
        catch(NoSuchFieldError nosuchfielderror) { }
        try
        {
            $SwitchMap$Em[Em.C.ordinal()] = 2;
        }
        catch(NoSuchFieldError nosuchfielderror1) { }
        try
        {
            $SwitchMap$Em[Em.E.ordinal()] = 3;
        }
        catch(NoSuchFieldError nosuchfielderror2) { }
    }
}
```
好像明白了什么！
- 假如不使用这个额外的T$1类，我所想象的代码因该长这样
``` java
    //常量池里的东西先不管了

    0: getstatic     #9     
    3: invokevirtual #11                 // Method Em.ordinal:()I
    7: lookupswitch   { // 1 to 3
                1: 40
                3: 51
                5: 62
            default: 73
    }
    。。。
    。。。
```
看来区别就在于 tableswitch 和 lookupswitch 

编译器废了这么大力气，就为了把lookupswitch替换成tableswitch ？

让我们仔细看一下这两者有什么不同的

## tableswitch 和 lookupswitch 的区别？

接着回去看官方文档
    
    Where the cases of the switch are sparse, the table representation of the tableswitch instruction becomes inefficient in terms of space. The lookupswitch instruction may be used instead. The lookupswitch instruction pairs int keys (the values of the case labels) with target offsets in a table. When a lookupswitch instruction is executed, the value of the expression of the switch is compared against the keys in the table. If one of the keys matches the value of the expression, execution continues at the associated target offset. If no key matches, execution continues at the default target.

 前面提到了，当switch内的case值能被表示为一个表中的索引值时，则使用tableswitch，但是，当switch里的case值非常稀疏的时候，tableswitch的做法在空间损耗方面非常糟糕，有道理，所以lookupswitch的做法是，将case的int值和转跳的偏移量作为一对放在了一个表里，当lookupswitch被执行的时候，这switch的表达式的值和这个表里的keys逐一比较，没有找到则使用默认值。

我们再看一下javac的源码：
```java
            // For each case, store its label in an array.
            int lo = Integer.MAX_VALUE;  // minimum label.
            int hi = Integer.MIN_VALUE;  // maximum label.
            int nlabels = 0;               // number of labels.
            。。。
            。。。

            // Determine whether to issue a tableswitch or a lookupswitch
            // instruction.
            long table_space_cost = 4 + ((long) hi - lo + 1); // words
            long table_time_cost = 3; // comparisons
            long lookup_space_cost = 3 + 2 * (long) nlabels;
            long lookup_time_cost = nlabels;
            int opcode =
                nlabels > 0 &&
                table_space_cost + 3 * table_time_cost <=
                lookup_space_cost + 3 * lookup_time_cost
                ?
                tableswitch : lookupswitch;
```

 嗯，大概明白了，出于性能考虑，对于一些连续的case值jvm会使用tableswitch，教为稀疏的case值则使用lookupswitch。
 
 好，接下来让我们写一个程序证明一下我们的猜想
## 性能测试 
使用[JMH](http://openjdk.java.net/projects/code-tools/jmh/)做我们的性能测试框架
```java
@State(Scope.Benchmark)
public class SwitchBenchmark {
  @Param({"1", "2", "3", "4", "5", "6", "7", "8"})
  int n;

  @Benchmark
  public long lookupSwitch() {
    return Switch.lookupSwitch(n);
  }

  @Benchmark
  public long tableSwitch() {
    return Switch.tableSwitch(n);
  }
}
```
因为通过java代码的方式写Switch类会被javac优化掉，所以我们使用[jasmin](https://github.com/Sable/jasmin)写
```
.class public nefk/Switch
.super java/lang/Object

.method public <init>()V
   aload_0
   invokenonvirtual java/lang/Object/<init>()V
   return
.end method

.method public static lookupSwitch(I)I
    .limit stack 1

    iload_0
    lookupswitch
      1 : One
      2 : Two
      3 : Three
      4 : Four
      5 : Five
      6 : Six
      7 : Seven
      default : Other

One:
    bipush 11
    ireturn
Two:
    bipush 22
    ireturn
Three:
    bipush 33
    ireturn
Four:
    bipush 44
    ireturn
Five:
    bipush 55
    ireturn
Six:
    bipush 66
    ireturn
Seven:
    bipush 77
    ireturn
Other:
    bipush -1
    ireturn
.end method

.method public static tableSwitch(I)I
    .limit stack 1

    iload_0
    tableswitch 1
      One
      Two
      Three
      Four
      Five
      Six
      Seven
      default : Other

One:
    bipush 11
    ireturn
Two:
    bipush 22
    ireturn
Three:
    bipush 33
    ireturn
Four:
    bipush 44
    ireturn
Five:
    bipush 55
    ireturn
Six:
    bipush 66
    ireturn
Seven:
    bipush 77
    ireturn
Other:
    bipush -1
    ireturn
.end method
```
jmh的运行结果是这样的
```
Benchmark                     (n)   Mode  Cnt          Score          Error  Units
SwitchBenchmark.lookupSwitch    1  thrpt  200  323330446.034 ±  2445701.999  ops/s
SwitchBenchmark.tableSwitch     1  thrpt  200  319148199.518 ±  2598409.017  ops/s

SwitchBenchmark.lookupSwitch    2  thrpt  200  362462418.531 ±  2113632.446  ops/s
SwitchBenchmark.tableSwitch     2  thrpt  200  336827136.850 ± 13390837.980  ops/s

SwitchBenchmark.lookupSwitch    3  thrpt  200  358321384.210 ±  3603503.904  ops/s
SwitchBenchmark.tableSwitch     3  thrpt  200  357352579.969 ±  4501450.687  ops/s

SwitchBenchmark.lookupSwitch    4  thrpt  200  401580310.966 ±  4127000.494  ops/s
SwitchBenchmark.tableSwitch     4  thrpt  200  376005438.482 ± 14937683.947  ops/s

SwitchBenchmark.lookupSwitch    5  thrpt  200  318344827.113 ±  2553139.591  ops/s
SwitchBenchmark.tableSwitch     5  thrpt  200  316609397.120 ±  4390158.172  ops/s

SwitchBenchmark.lookupSwitch    6  thrpt  200  327729755.563 ±  3328732.069  ops/s
SwitchBenchmark.tableSwitch     6  thrpt  200  321749811.593 ±  2651391.425  ops/s

SwitchBenchmark.lookupSwitch    7  thrpt  200  361246393.893 ±  4742280.906  ops/s
SwitchBenchmark.tableSwitch     7  thrpt  200  358376601.529 ±  3350421.622  ops/s

SwitchBenchmark.lookupSwitch    8  thrpt  200  347337820.333 ±  4287812.567  ops/s
SwitchBenchmark.tableSwitch     8  thrpt  200  355080497.046 ±  3393523.154  ops/s

```
结果是震惊的，对与相同的case值tableswitch和lookupswitch性能是差不多的

嗯，前面编译器做了那么多，原来结果都是一样的，惊了，
让我看一下jit编译后的汇编代码。

    -XX:+UnlockDiagnosticVMOptions  -XX:CompileCommand=print,nefk.Switch::*

tableswitch:
``` java
 # {method} {0x0000000108c4c008} 'tableSwitch' '(I)I' in 'nefk/Switch'
  # parm0:    rsi       = int
  #           [sp+0x20]  (sp of caller)
  0x0000000109a49800: sub    $0x18,%rsp
  0x0000000109a49807: mov    %rbp,0x10(%rsp)    ;*synchronization entry
                                                ; - nefk.Switch::tableSwitch@-1

  0x0000000109a4980c: cmp    $0x4,%esi
  0x0000000109a4980f: je     0x0000000109a49865
  0x0000000109a49811: cmp    $0x4,%esi
  0x0000000109a49814: jg     0x0000000109a49841
  0x0000000109a49816: cmp    $0x2,%esi
  0x0000000109a49819: je     0x0000000109a4983a
  0x0000000109a4981b: cmp    $0x2,%esi
  0x0000000109a4981e: jg     0x0000000109a49833
  0x0000000109a49820: cmp    $0x1,%esi
  0x0000000109a49823: jne    0x0000000109a4982c  ;*tableswitch
                                                ; - nefk.Switch::tableSwitch@1lookupswitch:
``` java
  # {method} {0x000000010a7b30e8} 'lookupSwitch' '(I)I' in 'nefk/Switch'
  # parm0:    rsi       = int
  #           [sp+0x20]  (sp of caller)
  0x000000010d692200: sub    $0x18,%rsp
  0x000000010d692207: mov    %rbp,0x10(%rsp)    ;*synchronization entry
                                                ; - nefk.Switch::lookupSwitch@-1

  0x000000010d69220c: cmp    $0x4,%esi
  0x000000010d69220f: je     0x000000010d692265
  0x000000010d692211: cmp    $0x4,%esi
  0x000000010d692214: jg     0x000000010d692241
  0x000000010d692216: cmp    $0x2,%esi
  0x000000010d692219: je     0x000000010d69223a
  0x000000010d69221b: cmp    $0x2,%esi
  0x000000010d69221e: jg     0x000000010d692233
  0x000000010d692220: cmp    $0x1,%esi
  0x000000010d692223: jne    0x000000010d69222c  ;*lookupswitch
                                                ; - nefk.Switch::lookupSwitch@1

```
生成的机器码也是一样的，用的也都是二分查询。

## 结论
### 我们用一下午证明了以下几点
- 不管你java 怎么写switch，我javac肯定不会让你看到真相
- 不管你javac怎么写switch，我jit  肯定不会让你看到真相
- 都是假的，一切都是假的。
```
                                                                    EVERYTHING IS FAKE 
                                                 
                                                 
                                                 
                                                    ▀       ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀   ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀                                          
                                                  ▀▀       ▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀     ▀                                  
                                                        ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀▀▀▀▀   ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀                                     
                                                  ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀                     ▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀                                 
                                                 ▀▀▀▀▀▀▀ ▀▀▀▀▀ ▀ ▀                          ▀ ▀ ▀▀▀▀▀▀▀▀▀▀▀                                
                                                ▀▀▀▀▀▀▀▀▀▀▀▀  ▀▀▀ ▀                             ▀  ▀▀▀▀▀▀▀▀                                
                                              ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀       ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀   ▀▀▀▀▀▀▀▀▀▀▀                              
                                             ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀  ▀  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀▀▀     ▀▀▀ ▀▀▀                              
                                             ▀▀ ▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀  ▀ ▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀           ▀▀▀ ▀▀                              
                                           ▀▀▀  ▀▀▀ ▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀    ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀             ▀▀▀▀▀▀▀                             
                                          ▀▀▀▀▀▀▀▀  ▀ ▀▀▀▀▀▀▀▀▀▀ ▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀             ▀▀▀ ▀▀▀                            
                                         ▀▀▀▀▀▀▀▀▀   ▀▀▀▀ ▀▀▀▀▀ ▀▀▀    ▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀             ▀▀▀▀▀▀                            
                                     ▀   ▀▀▀▀▀▀ ▀▀   ▀▀▀▀▀▀▀▀▀  ▀▀ ▀ ▀  ▀▀  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀            ▀▀▀▀▀▀                            
                                    ▀▀ ▀▀▀▀▀▀ ▀    ▀  ▀▀▀▀▀ ▀▀▀▀    ▀           ▀▀▀▀ ▀                   ▀▀▀▀▀▀▀                           
                                     ▀▀▀▀▀ ▀▀▀  ▀    ▀▀▀▀▀▀▀▀▀▀                   ▀▀▀▀▀▀▀▀                 ▀▀ ▀▀▀                          
                                       ▀▀▀▀▀▀▀       ▀▀▀▀▀▀▀▀▀              ▀▀ ▀▀▀▀▀▀                     ▀▀▀▀▀▀                           
                                        ▀ ▀▀▀▀▀            ▀▀▀▀    ▀     ▀  ▀▀▀▀▀▀▀▀▀▀                         ▀                           
                                      ▀▀▀▀▀▀▀  ▀▀▀▀▀▀ ▀▀  ▀   ▀    ▀▀▀▀▀    ▀▀ ▀▀▀▀▀▀▀  ▀                 ▀    ▀                           
                                       ▀  ▀ ▀ ▀  ▀    ▀▀▀▀▀▀▀▀ ▀▀     ▀▀▀▀▀▀ ▀▀▀ ▀▀▀▀▀▀▀▀▀                ▀   ▀▀                           
                                      ▀    ▀▀▀▀      ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀                 ▀▀ ▀▀                           
                                        ▀▀▀▀  ▀     ▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀ ▀▀▀▀▀  ▀▀                ▀▀▀  ▀                           
                                       ▀▀▀▀▀          ▀▀▀▀▀▀▀  ▀▀▀▀▀▀▀▀▀▀▀▀     ▀▀▀▀▀▀▀▀▀                   ▀ ▀▀                           
                                       ▀▀              ▀▀▀▀  ▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀                                                   
                                      ▀▀▀▀ ▀▀ ▀       ▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀ ▀▀▀  ▀                                                  
                                      ▀▀▀▀ ▀▀▀       ▀      ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀   ▀▀                 ▀ ▀▀                             
                                       ▀▀▀ ▀▀▀         ▀ ▀▀▀▀▀▀▀▀▀▀▀▀  ▀   ▀▀▀▀▀                       ▀  ▀▀ ▀▀                            
                                         ▀▀ ▀▀▀        ▀ ▀▀   ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀ ▀▀▀▀▀▀                ▀▀▀ ▀                             
                                        ▀▀▀▀▀▀▀▀ ▀▀  ▀ ▀▀▀   ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀ ▀▀▀▀▀▀ ▀               ▀ ▀ ▀  ▀                          
                                         ▀▀▀▀▀▀▀▀   ▀▀       ▀▀▀▀▀▀▀▀▀▀▀▀▀   ▀           ▀             ▀▀▀▀  ▀▀▀▀                          
                                          ▀▀▀▀▀▀▀▀▀        ▀▀   ▀▀▀▀▀▀▀▀▀▀     ▀      ▀              ▀ ▀▀▀ ▀▀▀▀▀▀▀▀                        
                                           ▀▀▀▀▀ ▀▀▀▀▀▀  ▀▀ ▀   ▀▀▀▀▀▀▀  ▀             ▀           ▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀                       
                                            ▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀                   ▀            ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀                      
                                              ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀   ▀▀                ▀  ▀▀ ▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀                     
                                               ▀▀ ▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀       ▀     ▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀   ▀▀▀▀ ▀▀ ▀▀▀▀                    
                                                ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀    ▀▀   ▀ ▀▀▀▀ ▀▀▀                     
                                               ▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀   ▀     ▀ ▀▀▀▀▀▀ ▀▀▀                   
                                               ▀▀▀▀ ▀▀▀    ▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀▀      ▀  ▀▀▀▀▀▀▀▀▀▀▀▀                  
                                             ▀▀▀▀▀▀▀▀▀▀▀▀  ▀▀▀ ▀▀   ▀        ▀▀▀▀     ▀  ▀▀ ▀▀▀  ▀▀        ▀ ▀▀▀▀▀▀▀▀▀▀▀▀   ▀              
                                            ▀▀▀▀▀▀▀▀▀▀      ▀▀▀ ▀                                         ▀  ▀▀ ▀▀▀▀▀▀▀▀▀                  
                                    ▀    ▀▀▀▀▀▀▀▀▀▀▀        ▀▀▀▀▀▀                                         ▀▀▀▀▀▀▀  ▀▀▀▀▀▀                 
                                    ▀▀▀▀▀▀▀▀ ▀▀▀▀▀           ▀   ▀                                       ▀ ▀▀▀▀▀▀▀  ▀▀▀▀▀▀▀                
                               ▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀            ▀▀▀▀▀▀                                   ▀  ▀▀▀ ▀▀▀▀ ▀▀▀ ▀ ▀▀                
                           ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀           ▀▀  ▀▀                                   ▀▀ ▀▀▀▀▀▀▀▀    ▀▀▀  ▀                
                            ▀▀▀▀▀ ▀▀▀▀  ▀▀                    ▀▀▀ ▀                                    ▀ ▀▀▀ ▀▀▀    ▀▀▀▀▀▀▀                
                           ▀▀▀ ▀  ▀▀▀▀▀▀▀▀   ▀ ▀▀           ▀     ▀                                   ▀▀▀▀▀ ▀▀▀           ▀▀               
                          ▀▀▀ ▀ ▀ ▀ ▀  ▀▀▀  ▀  ▀             ▀▀  ▀▀                                    ▀▀▀▀▀▀▀ ▀    ▀ ▀▀▀▀▀                
                         ▀▀▀▀ ▀  ▀ ▀▀▀▀▀▀▀▀  ▀▀               ▀  ▀▀                                ▀ ▀▀▀▀▀▀▀▀▀        ▀▀▀▀▀▀               
                     ▀  ▀ ▀▀▀▀ ▀ ▀▀▀▀▀▀▀▀▀▀▀ ▀ ▀               ▀  ▀                              ▀ ▀▀▀▀▀ ▀▀▀▀       ▀  ▀▀ ▀▀▀    ▀         
                         ▀▀▀▀ ▀▀▀▀▀▀  ▀▀▀▀▀▀▀▀                                                 ▀ ▀▀▀▀▀▀▀▀▀▀▀           ▀▀ ▀▀▀              
                     ▀ ▀▀ ▀▀▀▀▀▀▀  ▀▀▀▀▀▀▀▀▀▀▀▀  ▀                                           ▀ ▀ ▀▀▀▀ ▀▀▀▀ ▀           ▀▀▀ ▀▀▀             
                       ▀▀▀▀▀▀▀▀▀  ▀     ▀▀▀▀ ▀▀▀  ▀                          ▀▀▀▀▀▀▀        ▀▀ ▀▀▀▀▀ ▀▀▀               ▀▀▀                 
                        ▀▀▀ ▀▀▀ ▀        ▀▀▀▀▀▀▀▀▀▀ ▀       ▀▀▀  ▀▀ ▀   ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀              ▀▀▀▀▀              
                    ▀  ▀▀▀▀▀▀▀▀            ▀▀▀▀▀▀▀▀ ▀         ▀     ▀  ▀▀▀▀▀▀▀ ▀▀  ▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀                  ▀▀ ▀▀▀             
                      ▀▀▀ ▀▀▀   ▀▀          ▀▀▀▀▀▀▀▀        ▀  ▀ ▀▀   ▀  ▀▀  ▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀                    ▀▀  ▀              
                 ▀  ▀ ▀▀ ▀▀▀                 ▀▀▀▀▀▀▀▀▀▀ ▀▀   ▀▀ ▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀  ▀▀▀▀▀▀▀▀▀▀▀▀   ▀                                         
                    ▀▀▀▀▀▀▀▀                  ▀▀▀▀▀ ▀▀▀▀▀     ▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀ ▀ ▀  ▀▀▀▀▀▀▀▀▀▀  ▀  ▀                    ▀   ▀              
                  ▀▀▀▀▀▀▀▀▀                     ▀▀▀▀▀ ▀▀▀▀▀▀ ▀▀▀▀ ▀▀▀▀▀▀▀▀▀  ▀        ▀▀▀▀▀▀▀▀▀▀▀                          ▀▀              
                 ▀▀▀▀ ▀▀▀▀                       ▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀ ▀▀▀▀▀▀  ▀▀▀        ▀▀▀▀▀▀▀▀▀▀▀ ▀ ▀  ▀                    ▀▀            
               ▀▀▀▀▀▀▀▀▀                         ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀ ▀▀    ▀        ▀   ▀▀▀▀▀▀▀▀▀▀▀▀  ▀              ▀▀▀ ▀▀▀   ▀      ▀▀▀
              ▀▀▀▀▀▀▀▀▀▀ ▀                         ▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀ ▀▀   ▀          ▀ ▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀               ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
             ▀▀▀▀▀▀▀▀▀ ▀ ▀                              ▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀   ▀▀  ▀▀   ▀▀  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀         ▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀
          ▀  ▀▀▀▀▀▀▀                                    ▀▀▀▀ ▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀ ▀▀▀▀▀     ▀▀▀▀▀▀▀▀▀▀▀▀▀      ▀  ▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
      ▀ ▀▀▀ ▀▀▀ ▀▀▀▀                                  ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀    ▀   ▀▀▀▀▀ ▀▀▀▀▀▀▀▀     ▀▀ ▀▀▀▀  ▀ ▀ ▀ ▀▀   
 ▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀ ▀                                  ▀▀▀▀▀▀▀▀▀▀    ▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀ ▀▀▀ ▀▀ ▀         ▀▀  
▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀   ▀                              ▀▀▀▀▀▀▀▀▀▀▀               ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀    ▀▀▀▀▀▀▀▀▀▀  ▀     ▀       
 ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀                               ▀▀▀▀▀▀▀▀▀▀                   ▀   ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀ ▀▀▀ ▀▀       
 ▀▀▀▀▀▀▀▀▀▀▀▀▀                        ▀▀▀▀     ▀▀▀▀▀▀▀▀▀▀▀▀▀                      ▀▀▀▀▀▀             ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
                                ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀  ▀                                                ▀▀▀▀▀▀▀▀▀ ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀
                                 ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀▀                                                                 ▀   ▀            
                                ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀                                                                                     
                                  ▀▀ ▀              ▀  ▀                                                                                   
